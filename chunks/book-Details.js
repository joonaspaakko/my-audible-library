(self.webpackChunk=self.webpackChunk||[]).push([[661],{6796:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s}),o(3238),o(895);const s={methods:{makeFullUrl:function(e){var t=new Url(this.$store.state.urlOrigin+e);return t.query.ipRedirectOverride=!0,t.query.overrideBaseCountry=!0,t.toString()},makeUrl:function(e,t){var o=this.$store.state.urlOrigin,s="";switch(e){case"store":case"book":s=o+"/pd/"+t;break;case"author":t.url&&(s=o+"/author/"+t.url);break;case"narrator":t.name&&(s=o+"/search?searchNarrator="+decodeURIComponent(t.name));break;case"series":t.asin&&(s=o+"/series/"+t.asin);break;case"publisher":t.name&&(s=o+"/search?searchProvider="+decodeURIComponent(t.name));break;case"categories":t.name&&(s=o+"/cat/"+t.url)}if(s){var i=new Url(s);return i.query.ipRedirectOverride=!0,i.query.overrideBaseCountry=!0,i.toString()}return""}}}},6084:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s}),o(266);const s={mixins:[o(3223).Z],methods:{progressbarWidth:function(e){if(e.progress){if("finished"===e.progress.toLowerCase().trim())return{width:"100%"};if(e.length){var t=this.timeStringToSeconds(e.progress),o=this.timeStringToSeconds(e.length);return{width:(t=o-t)/o*100+"%"}}return{width:0}}return{width:0}}}}},6623:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s}),o(2410),o(3238),o(895);const s={methods:{secondsToTimeString:function(e,t){var o=function(e,o){return t?e:("000"+e).slice(-1*o)},s=parseFloat(e).toFixed(3),i=Math.floor(s/60/60),r=Math.floor(s/60)%60,a=(Math.floor(s-60*r),s.slice(-3),(i.toString().length>1?i:o(i,2))+(t?"h ":".")),n=o(r,2)+(t?"m ":"");return t&&!i&&(a=""),a+n}}}},2410:(e,t,o)=>{"use strict";var s=o(1695),i=o(8759),r=o(6526),a=o(7740),n=o(4005),l=o(4088),c=o(9720),u=o(211),d=o(9955),h=o(3002),g=d("slice"),m=h("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),b=[].slice,k=Math.max;s({target:"Array",proto:!0,forced:!g||!m},{slice:function(e,t){var o,s,u,d=l(this),h=n(d.length),g=a(e,h),m=a(void 0===t?h:t,h);if(r(d)&&("function"!=typeof(o=d.constructor)||o!==Array&&!r(o.prototype)?i(o)&&null===(o=o[p])&&(o=void 0):o=void 0,o===Array||void 0===o))return b.call(d,g,m);for(s=new(void 0===o?Array:o)(k(m-g,0)),u=0;g<m;g++,u++)g in d&&c(s,u,d[g]);return s.length=u,s}})},9615:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>S}),o(911),o(266);var s=o(3223),i=o(6623),r=o(6084),a=o(6495),n=(o(3238),o(1418),o(6796));const l={name:"carousel",props:["books","width"],mixins:[n.Z,a.Z],components:{splide:function(){return o.e(301).then(o.bind(o,7067)).then((function(e){return e.Splide}))},"splide-slide":function(){return o.e(301).then(o.bind(o,7067)).then((function(e){return e.SplideSlide}))}},data:function(){return{loaded:!1,options:{type:"loop",rewind:!0,width:null,trimSpace:!1,gap:"4px",lazyLoad:"nearby",preloadPages:1,perPage:5}}},mounted:function(){this.options.width=this.$el.offsetWidth;var e=this.$el.offsetWidth-84;this.options.perPage=Math.floor(e/132),this.loaded=!0},methods:{sliderTippyContent:function(e){return'<div style="font-weight: normal; text-align: left; padding: 10px; font-size: 13px; line-height: 17px">'+(e.title?'<div><h3 style="font-size: 1.2em; font-weight: bold; margin: 0 0 3px 0;">'+e.title+"</h3>":"")+(e.subHeading?'<div><h2 style="font-size: 1.1em; font-weight: normal; margin: 0 0 3px 0;">'+e.subHeading+"</h2>":"")+(e.authors?"<div><strong>Authors: </strong>"+e.authors+"</div>":"")+(e.narrators?"<div><strong>Authors: </strong>"+e.narrators+"</div>":"")+(e.length?"<div><strong>Length: </strong>"+e.length+"</div>":"")+"</div>"}}};var c=o(810);const u=(0,c.Z)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ale-carousel"},[o("h3",{staticClass:"ale-heading"},[e._t("default")],2),e._v(" "),e.loaded?o("splide",{ref:"splide",attrs:{options:e.options}},e._l(e.books,(function(t,s){return o("splide-slide",{key:s,staticClass:"ale-carousel-item"},[o("a",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{href:e.makeUrl("book",t.asin),target:"_blank",content:e.sliderTippyContent(t)}},[o("img",{staticClass:"cover",attrs:{"data-splide-lazy":e.makeCoverUrl(t.cover),alt:""}})])])})),1):e._e()],1)}),[],!1,null,null,null).exports;o(2327),o(1013),o(1203);const d={name:"booksInSeries",props:["book"],data:function(){return{inSeries:!1,series:{collection:null,toggle:!1}}},created:function(){this.series.collection=this.getBooksInSeries(),this.series.count=this.getSeriesCount();var e=this;_.each(this.series.collection,(function(t){if(t.books.length)return e.inSeries=!0,!1}))},methods:{getBookNumber:function(e,t){var o=_.find(e.series,{asin:t}).bookNumbers;return o?o.join(","):""},getBooksInSeries:function(){var e=this,t=[];return e.book.series&&_.each(e.book.series,(function(o,s){var i=_.find(e.$store.state.library.series,{asin:o.asin});i&&t.push({asin:o.asin,name:o.name,length:i.length,books:_.map(i.books,(function(t){return _.find(e.$store.state.library.books,{asin:t})}))})})),t.length>0?t:null},getSeriesCount:function(){var e=[];return _.each(this.series.collection,(function(t){e.push(t.books.length)})),e.join(", ")},booksInSeriesLabelClick:function(){var e=this;this.series.toggle=!this.series.toggle,this.$nextTick((function(){e.$root.$emit("resizeSummary")}))},numbersClass:function(e){var t=e.progress;return{finished:!(!t||!t.toLowerCase().match("finished")),reading:!(!t||t.toLowerCase().match("finished")),unfinished:!e.progress,current:this.book.asin===e.asin}},iconTippyContent:function(e){var t=this.numbersClass(e),o="";return t.finished?o="Finished!":t.unfinished?o="Not started...":t.reading&&(o="Started..."),o},booksInSeriesIcon:function(e){var t=this.numbersClass(e),o="";return t.finished?o="archive":t.unfinished?o="book":t.reading&&(o="book-reader"),o}}},h=(0,c.Z)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.inSeries?o("div",{staticClass:"label hidden-section-label my-books-in-series-label",on:{click:e.booksInSeriesLabelClick}},[o("span",{staticClass:"heading"},[e._v("My books in the series")]),e._v(" "),o("span",{staticClass:"count"},[e._v(e._s(e.series.count))]),e._v(" "),o("font-awesome",{attrs:{fas:"",icon:e.series.toggle?"chevron-up":"chevron-down"}})],1):e._e(),e._v(" "),e.series.toggle?o("div",{staticClass:"hidden-section my-books-in-series"},e._l(e.series.collection,(function(t,s){return o("div",{key:t.asin,staticClass:"series-section"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",flipBehavior:["right","top","bottom"],maxWidth:300,allowHTML:!0},expression:"{ placement: 'right', flipBehavior: ['right', 'top', 'bottom'], maxWidth: 300, allowHTML: true }"}],staticClass:"series-heading",attrs:{content:"<div style='text-align: left;'>The total number of books is based on every single book listing in the series page, including different versions or bundles of books you may already have.</div>"}},[o("div",{staticClass:"series-name"},[o("router-link",{attrs:{to:{name:"series",params:{series:t.asin}}}},[e._v("\n            "+e._s(t.name)+"\n          ")])],1),e._v(" "),o("div",{staticClass:"series-length"},[e._v("\n          "+e._s(t.books.length)+" / "+e._s(t.length)+"\n        ")])]),e._v(" "),e._l(t.books,(function(s,i){return o("div",{key:s.asin,staticClass:"numbers-list-item",class:e.numbersClass(s),attrs:{"data-series-name":t.name}},[o("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",flipBehavior:["left","top","bottom"]},expression:"{ placement: 'left', flipBehavior: ['left', 'top', 'bottom'] }"}],staticClass:"icon",attrs:{content:e.iconTippyContent(s)}},[o("font-awesome",{attrs:{fas:"",icon:e.booksInSeriesIcon(s)}})],1),e._v(" "),o("router-link",{attrs:{to:{name:"series",params:{series:t.asin},query:{book:s.asin}}}},[o("span",{staticClass:"numbers"},[e._v(e._s(e.getBookNumber(s,t.asin)))]),e._v(" "),o("span",{staticClass:"title"},[e._v(e._s(s.title))])])],1)}))],2)})),0):e._e()])}),[],!1,null,"2f6bbdee",null).exports,g={name:"arrayToHTML",data:function(){return{}},props:["label","array","delim"],mixins:[n.Z],created:function(){},computed:{identifierClass:function(){return"details-"+_.kebabCase(this.label)}},methods:{}},m=(0,c.Z)(g,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.identifierClass},[o("strong",{staticClass:"strong-label"},[e._v(e._s(e.label)+":")]),e._v(" "),e._l(e.array,(function(t,s){return o("span",{key:t.name+"("+s+")"},[o("span",[0!==s?o("span",[e._v(e._s(e.delim||", "))]):e._e(),e._v(" "),o("a",{attrs:{href:e.makeUrl(e.label.toLowerCase(),t),target:"_blank"}},[e._v(e._s(t.name))]),t.bookNumbers?o("span",{staticClass:"book-number"},[e._v("\n        (book\n        "),e._l(t.bookNumbers,(function(t,s){return o("span",[0!==s?o("span",[e._v(e._s(","))]):e._e(),o("span",[e._v(e._s(t))])])})),e._v(")")],2):e._e()])])}))],2)}),[],!1,null,null,null).exports,p={name:"bookSummary",props:["book","detailsEl"],mixins:[n.Z],components:{arrayToHTML:m},data:function(){return{summary:{readmore:{toggle:!1,exists:!1},maxHeight:null,maxHeightTemp:null}}},computed:{summaryHTML:function(){return this.book.summary||this.book.blurb}},mounted:function(){this.$nextTick((function(){this.getSummaryMaxHeight()}))},created:function(){this.$root.$on("afterWindowResize",this.getSummaryMaxHeight),this.$root.$on("resizeSummary",this.getSummaryMaxHeight)},beforeDestroy:function(){this.$root.$off("afterWindowResize",this.getSummaryMaxHeight),this.$root.$off("resizeSummary",this.getSummaryMaxHeight)},methods:{getSummaryMaxHeight:function(){if(window.innerWidth<=640)this.summary.maxHeight="300px",this.summary.maxHeightTemp=this.summary.maxHeight;else{var e=this.detailsEl.querySelector(".information").offsetHeight,t=this.$refs.summary.offsetHeight>e;this.summary.maxHeight=t?e+"px":null,this.summary.maxHeightTemp=e+"px"}},summaryReadMoreclick:function(){var e=this.$refs.readMoreBtn.getBoundingClientRect().top;this.summary.readmore.toggle=!this.summary.readmore.toggle,this.summary.maxHeight=this.summary.readmore.toggle?"none":this.summary.maxHeightTemp,this.summary.readmore.toggle||this.$nextTick((function(){scroll({top:this.$refs.readMoreBtn.getBoundingClientRect().top+window.pageYOffset-e})}))}}},b=(0,c.Z)(p,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"summaryWrapper",staticClass:"book-summary-wrapper",class:{expanded:e.summary.readmore.toggle},style:{maxHeight:e.summary.maxHeight,paddingBottom:e.summary.readmore.toggle?"40px":"0px"}},[o("div",{ref:"summary",staticClass:"book-summary"},[o("h2",{staticClass:"book-title"},[o("a",{attrs:{href:e.makeUrl("book",e.book.asin),target:"_blank",rel:"noopener nofollow noreferrer"}},[e._v("\n        "+e._s(e.book.title)+"\n      ")])]),e._v(" "),e.book.categories?o("div",{staticClass:"categories"},[e.book.categories?o("arrayToHTML",{attrs:{label:"Categories",array:e.book.categories,delim:" > "}}):e._e()],1):e._e(),e._v(" "),o("div",{staticClass:"inline-children smoll-text"},[e.book.releaseDate?o("div",{staticClass:"release-date"},[o("span",{staticClass:"strong-label"},[e._v("Released:")]),e._v(" "),o("span",[e._v(e._s(e.book.releaseDate))])]):e._e()]),e._v(" "),o("div",{staticClass:"summary-inner-wrap",domProps:{innerHTML:e._s(e.summaryHTML)}})]),e._v(" "),e.summary.maxHeight?o("div",{ref:"readMoreBtn",staticClass:"summary-read-more",on:{click:e.summaryReadMoreclick}},[o("span",[e._v(e._s(e.summary.readmore.toggle?"Read less":"Read more"))]),e._v(" "),o("font-awesome",{attrs:{fas:"",icon:e.summary.readmore.toggle?"chevron-up":"chevron-down"}})],1):e._e()])}),[],!1,null,"6f955287",null).exports,k={name:"goodReadsLink",props:["book","icon","topRight","size"],mixins:[{methods:{makeGoodReadsUrl:function(){var e=_.find(this.book.isbns,{type:"ISBN_10"});e&&(e=e.identifier);var t=_.find(this.book.isbns,{type:"ISBN_13"});t&&(t=t.identifier);var o=this.book.authors?this.book.authors[0].name+" "+(this.book.titleShort||this.book.title):"";return"https://www.goodreads.com/search?q="+encodeURIComponent(o)}}}],data:function(){return{goodreadsUrl:null}},created:function(){this.book&&(this.goodreadsUrl=this.makeGoodReadsUrl())}},f=(0,c.Z)(k,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.goodreadsUrl?o("a",{class:{"top-right":e.topRight},attrs:{href:e.goodreadsUrl,target:"_blank"}},[e.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon",style:{width:(e.size||30)+"px",height:(e.size||30)+"px"},attrs:{content:"Search for the book in Goodreads"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiM0ZTM0MmUiLz48L3N2Zz4=",alt:""}})]):o("span",[e._v("Search in Goodreads")])]):e._e()}),[],!1,null,"66a19166",null).exports,M={name:"aleBookBasicInfo",props:["book","goodreads"],components:{goodReadsLink:f,arrayToHTML:m}},v=(0,c.Z)(M,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"basic-info"},[e.book.authors?o("arrayToHTML",{attrs:{label:"Author",array:e.book.authors}}):e._e(),e._v(" "),e.book.narrators?o("arrayToHTML",{attrs:{label:"Narrator",array:e.book.narrators}}):e._e(),e._v(" "),e.book.series?o("arrayToHTML",{attrs:{label:"Series",array:e.book.series}}):e._e(),e._v(" "),e.book.publishers?o("arrayToHTML",{attrs:{label:"Publisher",array:e.book.publishers}}):e._e(),e._v(" "),e.book.length?o("div",[o("strong",{staticClass:"strong-label"},[e._v("Length:")]),e._v("\n    "+e._s(e.book.length)+"\n  ")]):e._e(),e._v(" "),o("div",{staticClass:"line-it-up"},[e.book.rating?o("div",{staticClass:"rating"},[o("strong",{staticClass:"strong-label"},[e._v("Overall rating:")]),e._v(" "),o("span",[e._v(e._s(e.book.rating)+" ("+e._s(e.book.ratings)+" ratings)")])]):e._e(),e._v(" "),e.book.myRating?o("div",{staticClass:"own-rating"},[o("strong",{staticClass:"strong-label"},[e._v("My rating:")]),e._v(" "),o("span",[e._v(e._s(e.book.myRating))])]):e._e()])],1)}),[],!1,null,"92c12978",null).exports,y=(0,c.Z)({name:"favoriteBook",props:["topRight","size"]},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"favorite",class:{"top-right":e.topRight},style:{width:(e.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"heart",content:"This book is one of my favorites!"}})}),[],!1,null,"cf36e8ec",null).exports;var w=o(7661);const x=(0,c.Z)({name:"openInApp",props:["book","icon","topRight","size"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://smart.link/o3waqx4wg1gdn?asin="+this.book.asin)}},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.url?o("a",{class:{"top-right":e.topRight},attrs:{href:e.url,target:"_blank"}},[e.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon audible-app-link",style:{width:(e.size||30)+"px",height:(e.size||30)+"px"},attrs:{content:"Open in app"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):o("span",[e._v("Search in Goodreads")])]):e._e()}),[],!1,null,"33eaab15",null).exports,I=(0,c.Z)({name:"openWebPlayer",props:["book","icon","topRight","size"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://www.audible.com/webplayer?asin="+this.book.asin)}},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.url?o("a",{class:{"top-right":e.topRight},attrs:{href:e.url,target:"_blank"}},[e.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon audible-app-link",style:{width:(e.size||30)+"px",height:(e.size||30)+"px"},attrs:{content:"Open web player"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):o("span",[e._v("Search in Goodreads")])]):e._e()}),[],!1,null,"a5b93062",null).exports,L={name:"book-info-toolbar",props:["book"],components:{goodReadsLink:f,favoriteBook:y,sampleButton:w.Z,openInApp:x,openWebPlayer:I},data:function(){return{size:20}}},T={name:"bookDetails",components:{bookBasicInfo:v,bookInfoToolbar:(0,c.Z)(L,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"book-info-toolbar"},[e.book.favorite?o("favorite-book",{attrs:{size:e.size,book:e.book}}):e._e(),e._v(" "),o("sampleButton",{attrs:{size:e.size,book:e.book}}),e._v(" "),o("good-reads-link",{attrs:{size:e.size,book:e.book,icon:!0}}),e._v(" "),o("open-in-app",{attrs:{size:e.size,book:e.book,icon:!0}}),e._v(" "),o("open-web-player",{attrs:{size:e.size,book:e.book,icon:!0}})],1)}),[],!1,null,null,null).exports,carousel:u,booksInSeries:h,arrayToHTML:m,bookSummary:b},mixins:[s.Z,i.Z,r.Z,a.Z,n.Z],props:["book","index","booksWrapper"],data:function(){return{maxWidth:"unset",scrollTop:0,loading:!0,clickedBook:null}},created:function(){this.clickedBook=document.querySelector('.ale-book[data-asin="'+this.book.asin+'"]')||document.querySelector('.ale-row[data-asin="'+this.book.asin+'"]'),this.scrollTop=window.pageYOffset,this.$root.$on("afterWindowResize",this.onWindowResize)},mounted:function(){this.maxWidth=this.repositionBookDetails()+"px",this.resetScroll(),this.$updateQuery({query:"book",value:this.book.asin}),this.loading=!1},beforeDestroy:function(){this.$root.$off("afterWindowResize",this.onWindowResize)},computed:{getMaxWidth:function(){return"spreadsheet"===this.$store.state.sticky.viewMode||window.innerWidth>800?this.maxWidth:"800px"}},methods:{onWindowResize:function(e){this.maxWidth=this.repositionBookDetails()+"px",e.widthChanged&&this.resetScroll()},changeUrl:function(){_.get(this.$route,"query.book")!==this.book.asin&&this.$router.replace({query:{book:this.book.asin}})},resetScroll:function(){this.$nextTick((function(){"grid"===this.$store.state.sticky.viewMode?scroll({top:this.clickedBook.offsetTop-78}):document.querySelector(".list-view-inner-wrap").scroll({top:this.clickedBook.offsetTop-78})}))},repositionBookDetails:function(){var e=document.querySelector(".ale-books"),t=e.querySelector(".ale-book")?e.querySelectorAll(".ale-book"):e.querySelector("table tbody").querySelectorAll(".ale-row"),o={};o.el=t[this.index],o.index=this.index,o.width=o.el.offsetWidth,o.siblings=t;var s={};s.el=e,s.width=s.el.offsetWidth;var i={};i.cols=Math.floor(s.width/o.width)||1,i.cols<2?i.rowEndEl=o.el:(i.currentRow=Math.floor(o.index/i.cols)+1,i.rowEnd=i.currentRow*i.cols,i.getRowEndEl=function(e){var t=o.siblings[e];return t||(t=i.getRowEndEl(--e)),t},i.rowEndEl=i.getRowEndEl(i.rowEnd-1));var r=document.querySelector(".target-row-end");return r&&r.classList.remove("target-row-end"),i.rowEndEl.classList.add("target-row-end"),i.rowEndEl.parentNode.insertBefore(this.$refs.bookDetails,i.rowEndEl.nextSibling),"spreadsheet"!==this.$store.state.sticky.viewMode&&this.repositionBookDetailsArrow(o.el),"spreadsheet"===this.$store.state.sticky.viewMode?s.width-60:o.width*i.cols},repositionBookDetailsArrow:function(e){var t=e.getBoundingClientRect().left+window.scrollX+e.offsetWidth/2;this.$refs.arrow.style.left=t+"px"},openAdjacentBookDetails:function(e){var t=this;if("grid"===this.$store.state.sticky.viewMode)switch(e.srcKey){case"left":case"tabShift":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index-1]});break;case"right":case"tab":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index+1]});break;case"up":case"down":var o={};o.el=document.querySelector(".ale-books"),o.width=o.el.offsetWidth;var s={};s.el=this.clickedBook,s.index=this.index,s.width=s.el.offsetWidth;var i=Math.floor(o.width/s.width);this.$root.$emit("book-clicked",{book:"up"===e.srcKey?t.$store.getters.collection[this.index-i]:function e(o){var s=t.$store.getters.collection[o];return s||(s=e(--o)),s}(this.index+i)})}else switch(e.srcKey){case"left":case"up":case"tabShift":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index-1]});break;case"right":case"down":case"tab":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index+1]})}},closeBookDetails:function(){this.$emit("update:book",null),void 0!==this.$route.query&&this.$router.replace({query:{book:void 0}})},progressTooltip:function(e){if("finished"===e.progress.toLowerCase().trim()){var t=this.timeStringToSeconds(e.length);return"Finished: ( "+this.secondsToTimeString(t)+" )"}var o=this.timeStringToSeconds(e.progress),s=this.timeStringToSeconds(e.length),i=s-o;return"Progress: "+this.secondsToTimeString(i)+" / "+this.secondsToTimeString(s)},progressInfo:function(e){if(e.progress&&e.length){if("finished"===e.progress.toLowerCase().trim()){var t=this.timeStringToSeconds(e.length);return'<div class="stretch-center" style="flex: 1;"><strong>Finished!</strong> ( '+this.secondsToTimeString(t,!0)+" )</div>"}var o=this.timeStringToSeconds(e.progress),s=this.timeStringToSeconds(e.length),i=s-o;return"<strong>Progress: </strong><div>"+this.secondsToTimeString(i,!0)+" / "+this.secondsToTimeString(s,!0)+"</div>"}return"<div>Length: "+e.length+"</div>"}}},S=(0,c.Z)(T,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["esc"],expression:"['esc']",modifiers:{once:!0}}],ref:"bookDetails",class:{"spreadsheet-details":"spreadsheet"===e.$store.state.sticky.viewMode},attrs:{id:"ale-bookdetails"},on:{shortkey:function(t){return e.closeBookDetails()}}},["spreadsheet"!==e.$store.state.sticky.viewMode?o("div",{ref:"arrow",staticClass:"arrow"}):e._e(),e._v(" "),o("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:{left:["arrowleft"],up:["arrowup"],right:["arrowright"],down:["arrowdown"],tab:["tab"],tabShift:["tab","shift"]},expression:"{ left: ['arrowleft'], up: ['arrowup'], right: ['arrowright'], down: ['arrowdown'], tab: ['tab'], tabShift: ['tab', 'shift'] }",modifiers:{once:!0}}],attrs:{id:"book-info-container"},on:{shortkey:e.openAdjacentBookDetails}},[o("div",{staticClass:"inner-wrap",style:{maxWidth:e.getMaxWidth}},[o("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",flipBehavior:["left","right"],allowHTML:!0},expression:"{ placement: 'left', flipBehavior: ['left', 'right'], allowHTML: true }"}],staticClass:"book-details-info",attrs:{icon:["fas","info-circle"],content:"<div style='text-align: left;'><h3 style='margin: 0; padding-top: 10px; padding-left: 15px;'>Shortcuts</h3><ul><li><strong>Close:</strong> Esc</li><li><strong>Previous book:</strong> shift+tab, left arrow, up arrow (spreadsheet)</li><li><strong>Next book:</strong> tab, right arrow, down arrow (spreadsheet)</li><li><strong>Previous row:</strong> up arrow (Grid view)</li><li><strong>Next row:</strong> down arrow (Grid view)</li></ul></div>"}}),e._v(" "),o("div",{staticClass:"top"},[o("div",{ref:"information",staticClass:"information"},[o("div",{staticClass:"cover-wrap"},[o("a",{attrs:{href:e.makeUrl("book",e.book.asin),target:"_blank"}},[o("div",{staticClass:"progressbar"},[o("div",{staticClass:"progress",style:e.progressbarWidth(e.book)})]),e._v(" "),e.book.cover?o("img",{staticClass:"cover",attrs:{src:e.makeCoverUrl(e.book.cover)}}):e._e()])]),e._v(" "),o("div",{staticClass:"progress-info",domProps:{innerHTML:e._s(e.progressInfo(e.book))}}),e._v(" "),o("div",{staticClass:"basic-details"},[o("book-info-toolbar",{attrs:{book:e.book}}),e._v(" "),o("book-basic-info",{attrs:{book:e.book}})],1),e._v(" "),o("books-in-series",{attrs:{book:e.book}})],1),e._v(" "),o("book-summary",{attrs:{detailsEl:e.$el,book:e.book}})],1),e._v(" "),!e.loading&&e.book.peopleAlsoBought?o("carousel",{key:this.maxWidth,attrs:{books:e.book.peopleAlsoBought}},[e._v("\n        Listeners also enjoyed\n      ")]):e._e(),e._v(" "),!e.loading&&e.book.moreLikeThis?o("carousel",{key:this.maxWidth,attrs:{books:e.book.moreLikeThis}},[e._v("\n        More listens like this\n      ")]):e._e()],1)])])}),[],!1,null,"26036fc4",null).exports},7661:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});const s=(0,o(810).Z)({name:"sampleButton",props:["book","index","topRight","size"],methods:{playSample:function(e,t){this.$root.$emit("play-audio",{from:"sampleButton",route:this.$route,book:e,index:t})}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pointer",class:{"top-right":e.topRight},style:{width:(e.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"play-circle",content:"Play sample audio"},on:{click:function(t){return e.playSample(e.book,e.rowIndex)}}})}),[],!1,null,"2c39457b",null).exports}}]);